{"version":3,"file":"ourcases.min.js","sources":["../src/ourcases.js"],"sourcesContent":["import $ from 'jquery';\r\nimport Templates from 'core/templates';\r\nimport Notification from 'core/notification';\r\nimport sectionTextUpsert from 'local_dta/ourcases_repository';\r\n\r\n\r\n/**\r\n * Add a new text section to the page.\r\n * @return {void}\r\n */\r\nfunction addTextSection() {\r\n    Templates.render('local_dta/ourcases/section_text', {id: 0, title: null}).then((html) => {\r\n        return $('#sections').append(html);\r\n    }).fail(Notification.exception);\r\n}\r\n\r\n\r\n/**\r\n * Upsert a text section.\r\n * @param {object} args - The arguments for the function.\r\n */\r\nfunction upsertTextSection(args) {\r\n    sectionTextUpsert(args).then((response) => {\r\n        if (response.warnings.length) {\r\n           return Notification.alert(response.warnings[0].message);\r\n        }\r\n        return Notification.success('Section saved');\r\n    }).fail(Notification.exception);\r\n}\r\n\r\n\r\n/**\r\n * Set event listeners for the module.\r\n * @return {void}\r\n *\r\n */\r\nfunction upsertHeaderSection() {\r\n    const ourcaseid = $('#ourcases-id').val();\r\n    const sectionid = $('#section-header-id').val();\r\n    const title = $('#section-header-title').val();\r\n    const text = $('#section-header-description').val();\r\n    const sequence = 0;\r\n    upsertTextSection({ourcaseid, sectionid, title, text, sequence});\r\n}\r\n\r\n/**\r\n * Set event listeners for the module.\r\n * @return {void}\r\n * */\r\nfunction setEventListeners() {\r\n    // Add a new text section\r\n    $(document).on('click', '#add-section', () => {\r\n        addTextSection();\r\n    });\r\n    // Edit the header\r\n    $(document).on('click', '#header-edit-button', () => {\r\n        upsertHeaderSection();\r\n    });\r\n}\r\n\r\n/**\r\n * Initialize the module.\r\n * @return {void}\r\n */\r\nexport const init = () => {\r\n    setEventListeners();\r\n};\r\n"],"names":["upsertHeaderSection","ourcaseid","val","sectionid","title","text","args","sequence","then","response","warnings","length","Notification","alert","message","success","fail","exception","setEventListeners","document","on","render","id","html","append"],"mappings":"2RAoCSA,4BACCC,WAAY,mBAAE,gBAAgBC,MAC9BC,WAAY,mBAAE,sBAAsBD,MACpCE,OAAQ,mBAAE,yBAAyBF,MACnCG,MAAO,mBAAE,+BAA+BH,UAnBvBI,KAAAA,KAqBL,CAACL,UAAAA,UAAWE,UAAAA,UAAWC,MAAAA,MAAOC,KAAAA,KAAME,SADrC,oCAnBCD,MAAME,MAAMC,UACtBA,SAASC,SAASC,OACZC,sBAAaC,MAAMJ,SAASC,SAAS,GAAGI,SAE3CF,sBAAaG,QAAQ,mBAC7BC,KAAKJ,sBAAaK,oBAsBhBC,wCAEHC,UAAUC,GAAG,QAAS,gBAAgB,wBAxC9BC,OAAO,kCAAmC,CAACC,GAAI,EAAGlB,MAAO,OAAOI,MAAMe,OACrE,mBAAE,aAAaC,OAAOD,QAC9BP,KAAKJ,sBAAaK,kCA0CnBE,UAAUC,GAAG,QAAS,uBAAuB,KAC3CpB,gUAQY,KAChBkB"}