define("local_dta/chat/main",["exports","jquery","core/templates","core/notification","./selectors","local_dta/repositories/chat_repository","./listeners"],(function(_exports,_jquery,_templates,_notification,_selectors,_chat_repository,_listeners){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=function(target){return _selectors.default.TARGET=target,void initComponent()},_exports.handleSendMessage=async function(){const message=(0,_jquery.default)(_selectors.default.INPUTS.CHAT_REPLY).val().trim();return(0,_chat_repository.sendMessage)({chatid:_selectors.default.OPEN_CHAT_ID,message:message}).then((()=>{(0,_jquery.default)(_selectors.default.INPUTS.CHAT_REPLY).val(""),renderChat(_selectors.default.OPEN_CHAT_ID)})).fail(_notification.default.exception),void console.log(message)},_exports.renderChat=renderChat,_exports.renderMenuChat=renderMenuChat,_jquery=_interopRequireDefault(_jquery),_templates=_interopRequireDefault(_templates),_notification=_interopRequireDefault(_notification),_selectors=_interopRequireDefault(_selectors),_listeners=_interopRequireDefault(_listeners);const initComponent=()=>{(0,_listeners.default)(),renderMenuChat()};async function renderMenuChat(){const{chatrooms:chatrooms}=await(0,_chat_repository.getChatRooms)();_templates.default.render(_selectors.default.TEMPLATES.MENU_CHAT,{chatrooms:chatrooms}).then((html=>{(0,_jquery.default)(_selectors.default.TARGET).html(html)})).fail(_notification.default.exception)}async function renderChat(id){_selectors.default.OPEN_CHAT_ID=id,_templates.default.render(_selectors.default.TEMPLATES.CHAT,{SELECTORS:_selectors.default}).then((html=>{(0,_jquery.default)(_selectors.default.TARGET).html(html)})).fail(_notification.default.exception)}return _exports.default}));

//# sourceMappingURL=main.min.js.map