{"version":3,"file":"likes_dislikes.min.js","sources":["../../src/reactions/likes_dislikes.js"],"sourcesContent":["import $ from \"jquery\";\r\nimport { toogleLikeAndDislike } from \"local_dta/repositories/reactions_repository\";\r\nimport { SELECTORS } from \"./selectors\";\r\nimport Notification from \"core/notification\";\r\n\r\n/**\r\n * Toggle the like and dislike buttons.\r\n * @param {number} componentinstance - The id of the component.\r\n * @param {number} reactiontype - The reaction to add. 1 for like, 0 for dislike.\r\n */\r\nexport function toggle(componentinstance, reactiontype) {\r\n    const component = $(SELECTORS.BUTTONS.likes).data(\"component\");\r\n    toogleLikeAndDislike({component, componentinstance, reactiontype})\r\n        .then((response) => {\r\n            return updateUI(componentinstance, response.likes, response.dislikes, response.reactiontype);\r\n        })\r\n        .fail(Notification.exception);\r\n}\r\n\r\n/**\r\n * Update the like and dislike buttons in the UI.\r\n * @param {number} componentinstance - The id of the component.\r\n * @param {number} likes - The number of likes.\r\n * @param {number} dislikes - The number of dislikes.\r\n * @param {number} reactiontype - The reaction to add. 1 for like, 0 for dislike.\r\n * @return {void}\r\n */\r\nfunction updateUI(componentinstance, likes, dislikes, reactiontype) {\r\n    const reactionSelectors = {\r\n        1: SELECTORS.BUTTONS.likes,\r\n        0: SELECTORS.BUTTONS.dislikes,\r\n    };\r\n\r\n    $(SELECTORS.BUTTONS.likes + SELECTORS.DATA.id(componentinstance)).removeClass(\"active\");\r\n    $(SELECTORS.BUTTONS.dislikes + SELECTORS.DATA.id(componentinstance)).removeClass(\"active\");\r\n\r\n    if (reactionSelectors.hasOwnProperty(reactiontype) && reactiontype >= 0) {\r\n        $(reactionSelectors[reactiontype] + SELECTORS.DATA.id(componentinstance)).addClass(\"active\");\r\n    }\r\n\r\n    const likesText = likes ? likes : \"\";\r\n    $(SELECTORS.DATA.id(componentinstance) + SELECTORS.COUNTS.likes).text(likesText);\r\n}\r\n"],"names":["componentinstance","reactiontype","component","SELECTORS","BUTTONS","likes","data","then","response","dislikes","reactionSelectors","DATA","id","removeClass","hasOwnProperty","addClass","likesText","COUNTS","text","updateUI","fail","Notification","exception"],"mappings":"+XAUuBA,kBAAmBC,oBAChCC,WAAY,mBAAEC,qBAAUC,QAAQC,OAAOC,KAAK,4DAC7B,CAACJ,UAAAA,UAAWF,kBAAAA,kBAAmBC,aAAAA,eAC/CM,MAAMC,mBAcGR,kBAAmBK,MAAOI,SAAUR,oBAC5CS,kBAAoB,GACnBP,qBAAUC,QAAQC,QAClBF,qBAAUC,QAAQK,8BAGvBN,qBAAUC,QAAQC,MAAQF,qBAAUQ,KAAKC,GAAGZ,oBAAoBa,YAAY,8BAC5EV,qBAAUC,QAAQK,SAAWN,qBAAUQ,KAAKC,GAAGZ,oBAAoBa,YAAY,UAE7EH,kBAAkBI,eAAeb,eAAiBA,cAAgB,uBAChES,kBAAkBT,cAAgBE,qBAAUQ,KAAKC,GAAGZ,oBAAoBe,SAAS,gBAGjFC,UAAYX,OAAgB,uBAChCF,qBAAUQ,KAAKC,GAAGZ,mBAAqBG,qBAAUc,OAAOZ,OAAOa,KAAKF,WA3BvDG,CAASnB,kBAAmBQ,SAASH,MAAOG,SAASC,SAAUD,SAASP,gBAElFmB,KAAKC,sBAAaC"}