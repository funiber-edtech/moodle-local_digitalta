{"version":3,"file":"listeners.min.js","sources":["../../src/cases/listeners.js"],"sourcesContent":["import $ from \"jquery\";\nimport {\n    addSection,\n    switchSectionEdition,\n    saveSection,\n    validateFormData\n} from \"local_digitalta/cases/main\";\nimport {\n    showDeleteSectionModal,\n    showSaveModal\n} from \"local_digitalta/cases/modals\";\nimport SELECTORS from \"local_digitalta/cases/selectors\";\n\n/**\n * Set event listeners for the page.\n * @return {void}\n */\nexport default function setEventListeners() {\n    const caseid = $(SELECTORS.INPUTS.caseid).val();\n\n    $(document).on('click', SELECTORS.BUTTONS.addSection, (event) => {\n        event.preventDefault();\n        addSection(caseid, 'text');\n    });\n\n    $(document).on('click', SELECTORS.BUTTONS.editSection, async function (event) {\n        const sectionid = event.currentTarget.dataset.id;\n        const sectiontitle = $(`#title_${sectionid}`).text().trim();\n        const sectioncontent = $(`#content_${sectionid}`).html();\n        await switchSectionEdition(sectionid, true, sectiontitle, sectioncontent);\n    });\n\n    $(document).on('click', SELECTORS.BUTTONS.cancelEditSection, function (event) {\n        const sectionid = event.currentTarget.dataset.id;\n        const sectiontitle = $(`#title_${sectionid}_original`).val();\n        const sectioncontent = $(`#content_${sectionid}_original`).val();\n        switchSectionEdition(sectionid, false, sectiontitle, sectioncontent);\n    });\n\n    $(document).on('click', SELECTORS.BUTTONS.saveSection, function (event) {\n        const sectionid = event.currentTarget.dataset.id;\n        saveSection(caseid, sectionid);\n    });\n\n    $(document).on('click', SELECTORS.BUTTONS.deleteSection, function(event) {\n        const sectionid = event.currentTarget.dataset.id;\n        showDeleteSectionModal(sectionid);\n    });\n\n    $(document).on('click', SELECTORS.BUTTONS.saveCase, function() {\n        if (validateFormData()) {\n            showSaveModal();\n        }\n    });\n}\n"],"names":["caseid","SELECTORS","INPUTS","val","document","on","BUTTONS","addSection","event","preventDefault","editSection","async","sectionid","currentTarget","dataset","id","sectiontitle","text","trim","sectioncontent","html","cancelEditSection","saveSection","deleteSection","saveCase"],"mappings":"oYAkBUA,QAAS,mBAAEC,mBAAUC,OAAOF,QAAQG,0BAExCC,UAAUC,GAAG,QAASJ,mBAAUK,QAAQC,YAAaC,QACnDA,MAAMC,sCACKT,OAAQ,+BAGrBI,UAAUC,GAAG,QAASJ,mBAAUK,QAAQI,aAAaC,eAAgBH,aAC7DI,UAAYJ,MAAMK,cAAcC,QAAQC,GACxCC,cAAe,mBAAG,UAASJ,aAAaK,OAAOC,OAC/CC,gBAAiB,mBAAG,YAAWP,aAAaQ,aAC5C,8BAAqBR,WAAW,EAAMI,aAAcG,uCAG5Df,UAAUC,GAAG,QAASJ,mBAAUK,QAAQe,mBAAmB,SAAUb,aAC7DI,UAAYJ,MAAMK,cAAcC,QAAQC,GACxCC,cAAe,mBAAG,UAASJ,sBAAsBT,MACjDgB,gBAAiB,mBAAG,YAAWP,sBAAsBT,qCACtCS,WAAW,EAAOI,aAAcG,uCAGvDf,UAAUC,GAAG,QAASJ,mBAAUK,QAAQgB,aAAa,SAAUd,aACvDI,UAAYJ,MAAMK,cAAcC,QAAQC,yBAClCf,OAAQY,kCAGtBR,UAAUC,GAAG,QAASJ,mBAAUK,QAAQiB,eAAe,SAASf,aACxDI,UAAYJ,MAAMK,cAAcC,QAAQC,sCACvBH,kCAGzBR,UAAUC,GAAG,QAASJ,mBAAUK,QAAQkB,UAAU,YAC5C"}