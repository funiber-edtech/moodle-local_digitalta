define("local_dta/casesourcases",["exports","jquery","core/templates","core/notification","local_dta/repositories/ourcasesRepository"],(function(_exports,_jquery,_templates,_notification,_ourcasesRepository){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function upsertText(args){(0,_ourcasesRepository.sectionTextUpsert)(args).then((data=>data)).fail(_notification.default.exception)}function changeSectionHeaderToEdit(){let toView=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const sectionid=(0,_jquery.default)("#section-header-id").val(),title=(0,_jquery.default)("#section-header-title").val(),description=(0,_jquery.default)("#section-header-description").val(),template=toView?"local_dta/casessection-header-edit":"local_dta/casessection-header-view";_templates.default.render(template,{sectionheader:{id:sectionid,title:title,description:description}}).then((html=>(0,_jquery.default)("#sections-header").html(html))).fail(_notification.default.exception)}function changeSectionToEdit(){let toView=arguments.length>0&&void 0!==arguments[0]&&arguments[0],id=arguments.length>1?arguments[1]:void 0;const description=(0,_jquery.default)("#content_".concat(id)).val(),template=toView?"local_dta/casessection-text-edit":"local_dta/casessection-text-view";_templates.default.render(template,{id:id,description:description}).then((html=>(0,_jquery.default)("#section_".concat(id)).replaceWith(html))).fail(_notification.default.exception)}function setEventListeners(){(0,_jquery.default)(document).on("click","#add-section",(()=>{_templates.default.render("local_dta/casessection-text-edit",{id:(new Date).getTime(),description:null,exist:!0}).then((html=>(0,_jquery.default)("#sections-body").append(html))).fail(_notification.default.exception)})),(0,_jquery.default)(document).on("click","#header-edit-button",(()=>{!function(){const sectionid=(0,_jquery.default)("#section-header-id").val();upsertText({ourcaseid:(0,_jquery.default)("#ourcases-id").val(),sectionid:sectionid,title:(0,_jquery.default)("#section-header-title").val(),text:(0,_jquery.default)("#section-header-description").val(),sequence:0}),changeSectionHeaderToEdit()}()})),(0,_jquery.default)(document).on("click","#header-to-edit-button",(()=>{changeSectionHeaderToEdit(!0)})),(0,_jquery.default)(document).on("click","#header-edit-close-button",(()=>{changeSectionHeaderToEdit()})),(0,_jquery.default)(document).on("click",".section-close-button",(function(){var sectionid;(sectionid=(0,_jquery.default)(this).data("id"))&&(0,_jquery.default)("#section_".concat(sectionid)).remove()})),(0,_jquery.default)(document).on("click",".section-edit-button",(function(){!function(id){const sectionid=(0,_jquery.default)("#not_exist_".concat(id)).val()?null:(0,_jquery.default)("#sectionid_".concat(id)).val();upsertText({ourcaseid:(0,_jquery.default)("#ourcases-id").val(),sectionid:sectionid,title:null,text:(0,_jquery.default)("#content_".concat(id)).val(),sequence:-1}),changeSectionToEdit(!1,id),(0,_jquery.default)("#not_exist_".concat(id)).val(!1)}((0,_jquery.default)(this).data("id"))})),(0,_jquery.default)(document).on("click",".section-to-edit-button",(function(){changeSectionToEdit(!0,(0,_jquery.default)(this).data("id"))}))}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_templates=_interopRequireDefault(_templates),_notification=_interopRequireDefault(_notification);_exports.init=()=>{setEventListeners()}}));

//# sourceMappingURL=ourcases.min.js.map