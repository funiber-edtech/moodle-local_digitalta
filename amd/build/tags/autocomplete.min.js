define("local_dta/tags/autocomplete",["exports","jquery","theme_dta/form-autocomplete","local_dta/repositories/autocomplete_repository","core/notification"],(function(_exports,_jquery,_formAutocomplete,_autocomplete_repository,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}async function saveNewTag(tagName){try{return await(0,_autocomplete_repository.createTags)({tag:tagName})}catch(error){return _notification.default.exception(error)}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.autocompleteTags=function(area){_formAutocomplete.default.enhance(area),selector=area,select=(0,_jquery.default)(selector),select.find("option[selected]").each((function(){select.val((0,_jquery.default)(this).val()).trigger("change")})),area=area.replace("#",""),document.getElementById(area).addEventListener("change",(function(e){!async function(selectedOptions){for(var i=0;i<selectedOptions.length;i++)if("-1"===selectedOptions[i].value){selectedOptions[i].label=selectedOptions[i].label.replace("Create: ","");const{id:id}=await saveNewTag(selectedOptions[i].label);selectedOptions[i].value=parseInt(id)}}(e.target.selectedOptions)}));var selector,select},_jquery=_interopRequireDefault(_jquery),_formAutocomplete=_interopRequireDefault(_formAutocomplete),_notification=_interopRequireDefault(_notification)}));

//# sourceMappingURL=autocomplete.min.js.map