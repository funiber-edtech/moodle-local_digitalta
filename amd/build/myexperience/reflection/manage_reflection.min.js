define("local_dta/myexperience/reflection/manage_reflection",["exports","jquery","core/modal_factory","core/templates","core/str","editor_tiny/editor","local_dta/repositories/reflection_repository","core/notification"],(function(_exports,_jquery,_modal_factory,_templates,_str,_editor,_reflection_repository,_notification){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}let tinyConfig;function setDefaultTinyMCE(){(0,_jquery.default)(".editor").each((function(){var area;area=this.id,(0,_editor.setupForElementId)({elementId:"".concat(area),options:tinyConfig})}))}function setEventListeners(){(0,_jquery.default)(document).on("click",".submit",(function(){!function(btn){const data=btn.data(),{target:target,group:group,id:id}=data,reflectionid=(0,_jquery.default)("#reflectionid").val(),content=window.tinyMCE.get(target).getContent();(0,_reflection_repository.sectionTextUpsert)({reflectionid:reflectionid,group:group,content:content,id:id}).then((()=>{_notification.default.addNotification({message:"Section saved successfully.",type:"success"})})).fail(_notification.default.exception)}((0,_jquery.default)(this))})),(0,_jquery.default)(document).on("click",".header",(function(){const section=(0,_jquery.default)(this).closest(".section"),content=section.find(".questions"),collapseIcon=(0,_jquery.default)(this).find("i");section.hasClass("collapsed")?(section.removeClass("collapsed"),content.css("display","flex"),collapseIcon.removeClass("fa-chevron-right").addClass("fa-chevron-down")):(section.addClass("collapsed"),content.hide(),collapseIcon.removeClass("fa-chevron-down").addClass("fa-chevron-right"))})),(0,_jquery.default)(document).on("click","#add_button",(function(){const importerParent=(0,_jquery.default)(this).closest("#importer"),importerDiv=importerParent.find("#import_div"),addIcon=(0,_jquery.default)(this).find("i");importerParent.hasClass("collapsed")?(importerParent.removeClass("collapsed"),importerDiv.css("display","flex"),addIcon.removeClass("fa fa-plus-circle").addClass("fa fa-minus-circle")):(importerParent.addClass("collapsed"),importerDiv.hide(),addIcon.removeClass("fa fa-minus-circle").addClass("fa fa-plus-circle"))})),(0,_jquery.default)(document).on("click",".import_button",(function(){switch((0,_jquery.default)(this).attr("id")){case"tiny":console.log("Tiny");break;case"tiny_record":console.log("Tiny Record");break;case"import_cases":!async function(){(await _modal_factory.default.create({title:(0,_str.get_string)("experience_reflection_import_cases_title","local_dta"),body:_templates.default.render("local_dta/experiences/reflection/import-case-modal",{})})).show()}();break;case"import_experiences":console.log("Import Experiences");break;case"import_tutor_conc":console.log("Import Tutor Conc");break;case"import_resources":console.log("Import Resources")}}))}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_jquery=_interopRequireDefault(_jquery),_modal_factory=_interopRequireDefault(_modal_factory),_templates=_interopRequireDefault(_templates),_notification=_interopRequireDefault(_notification);_exports.init=()=>{setEventListeners(),tinyConfig=window.dta_tiny_config,setDefaultTinyMCE()}}));

//# sourceMappingURL=manage_reflection.min.js.map