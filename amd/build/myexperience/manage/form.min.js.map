{"version":3,"file":"form.min.js","sources":["../../../src/myexperience/manage/form.js"],"sourcesContent":["import $ from \"jquery\";\r\nimport { Notification } from \"core/notification\";\r\nimport { setupForElementId } from \"editor_tiny/editor\";\r\nimport { setEventListeners } from \"./listeners\";\r\nimport { activateStep } from \"./steps\";\r\n\r\nlet tinyConfig;\r\n\r\n/**\r\n * Create tinyMCE in an area.\r\n * @param {string} area - The id of the area to create tinyMCE in.\r\n * @return {void}\r\n */\r\nfunction createTinyMCE(area) {\r\n  setupForElementId({\r\n    elementId: `${area}`,\r\n    options: tinyConfig,\r\n  });\r\n}\r\n\r\n/**\r\n * Set event listeners for the module.\r\n * @return {void}\r\n * */\r\nfunction setDefaultTinyMCE() {\r\n  $(\".editor\").each(function () {\r\n    createTinyMCE(this.id);\r\n  });\r\n}\r\n\r\n/**\r\n * Set the tinyMCE config.\r\n * @return {void}\r\n */\r\nfunction setTinyConfig() {\r\n  tinyConfig = window.dta_tiny_config;\r\n}\r\n\r\n// /**\r\n//  * Save the text section.\r\n//  * @param {object} btn - The data to save.\r\n//  * @return {void}\r\n//  */\r\n// function saveTextSection(btn) {\r\n//   const data = btn.data();\r\n//   const {target, group, id} = data;\r\n//   const reflectionid = $(\"#reflectionid\").val();\r\n//   const content = window.tinyMCE.get(target).getContent();\r\n//   sectionTextUpsert({ reflectionid, group, content, id })\r\n//     .then(() => {\r\n//       Notification.addNotification({\r\n//         message: \"Section saved successfully.\",\r\n//         type: \"success\",\r\n//       });\r\n//       return;\r\n//     })\r\n//     .fail(Notification.exception);\r\n// }\r\n\r\n/**\r\n * Show save case modal\r\n * @return {void}\r\n */\r\n// async function showImportCase() {\r\n//   const cases = await getCases();\r\n//   const saveModal = await ModalFactory.create({\r\n//     type: ModalFactory.types.SAVE_CANCEL,\r\n//     title: get_string(\"experience_reflection_import_cases_title\", \"local_dta\"),\r\n//     body: Templates.render(\"local_dta/experiences/manage/import-case-modal\", { cases }),\r\n//   });\r\n//   saveModal.setSaveButtonText(\"Import\");\r\n\r\n//   saveModal.getRoot().on(ModalEvents.save, () => {\r\n//     const caseIds = [];\r\n//     const selectedCases = saveModal.getRoot().find(\"input:checked\");\r\n//     selectedCases.each(function () {\r\n//       caseIds.push($(this).val());\r\n//     });\r\n//     saveModal.hide();\r\n//     //eslint-disable-next-line no-console\r\n//     console.log(caseIds);\r\n//   }\r\n//   );\r\n\r\n//   saveModal.show();\r\n// }\r\n\r\n/**\r\n * Save the experience.\r\n * @return {void}\r\n * */\r\nexport function saveExperience() {\r\n  const experienceTitle = $(\"#experience_title\").val(),\r\n    experienceLang = $(\"#experience_lang\").val(),\r\n    experienceInputState = $(\"#experience_inputState\").val(),\r\n    experienceIntroduction = window.tinyMCE.get(\"experience_introduction\").getContent(),\r\n    experienceProblem = window.tinyMCE.get(\"experience_problem\").getContent();\r\n\r\n  if (experienceTitle === \"\" || experienceLang === \"\"\r\n  || experienceInputState === \"\" || experienceIntroduction === \"\" || experienceProblem === \"\") {\r\n    Notification.addNotification({\r\n      message: \"Please fill in all fields.\",\r\n      type: \"error\",\r\n    });\r\n    return;\r\n  }\r\n\r\n}\r\n\r\nexport const init = () => {\r\n  setTinyConfig();\r\n  setEventListeners();\r\n  setDefaultTinyMCE();\r\n  activateStep();\r\n};\r\n"],"names":["tinyConfig","setDefaultTinyMCE","each","area","this","id","elementId","options","experienceTitle","val","experienceLang","experienceInputState","experienceIntroduction","window","tinyMCE","get","getContent","experienceProblem","addNotification","message","type","dta_tiny_config"],"mappings":"kNAMIA,oBAkBKC,wCACL,WAAWC,MAAK,eAZGC,KAAAA,KAaLC,KAAKC,iCAZH,CAChBC,oBAAcH,MACdI,QAASP,sIA4ELQ,iBAAkB,mBAAE,qBAAqBC,MAC7CC,gBAAiB,mBAAE,oBAAoBD,MACvCE,sBAAuB,mBAAE,0BAA0BF,MACnDG,uBAAyBC,OAAOC,QAAQC,IAAI,2BAA2BC,aACvEC,kBAAoBJ,OAAOC,QAAQC,IAAI,sBAAsBC,gBAEvC,KAApBR,iBAA6C,KAAnBE,gBACF,KAAzBC,sBAA0D,KAA3BC,wBAAuD,KAAtBK,yDACpDC,gBAAgB,CAC3BC,QAAS,6BACTC,KAAM,iFAOQ,KA1ElBpB,WAAaa,OAAOQ,mDA6EpBpB"}