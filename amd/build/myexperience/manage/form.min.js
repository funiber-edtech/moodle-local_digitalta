define("local_dta/myexperience/manage/form",["exports","jquery","core/notification","editor_tiny/editor","./listeners","./steps","./../../repositories/experience_repository"],(function(_exports,_jquery,_notification,_editor,_listeners,_steps,_experience_repository){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}let tinyConfig;function setDefaultTinyMCE(){(0,_jquery.default)(".editor").each((function(){var area;area=this.id,(0,_editor.setupForElementId)({elementId:"".concat(area),options:tinyConfig})}))}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.collapseAddSectionMenu=function(){const importerParent=(0,_jquery.default)(this).closest("#importer"),importerDiv=importerParent.find("#import_div"),addIcon=(0,_jquery.default)(this).find("i");importerParent.hasClass("collapsed")?(importerParent.removeClass("collapsed"),importerDiv.css("display","flex"),addIcon.removeClass("fa fa-plus-circle").addClass("fa fa-minus-circle")):(importerParent.addClass("collapsed"),importerDiv.hide(),addIcon.removeClass("fa fa-minus-circle").addClass("fa fa-plus-circle"))},_exports.init=void 0,_exports.saveExperience=async function(){const experienceTitle=(0,_jquery.default)("#experience_title").val(),experienceVisibility=(0,_jquery.default)("#experience_visibility").val(),experienceLang=(0,_jquery.default)("#experience_lang").val(),experienceIntroduction=window.tinyMCE.get("experience_introduction").getContent(),experienceProblem=window.tinyMCE.get("experience_problem").getContent();try{return await(0,_experience_repository.experienceUpsert)({id:0,title:experienceTitle,description:experienceIntroduction,context:experienceProblem,lang:experienceLang,visible:experienceVisibility}),_notification.default.addNotification({message:"Experience saved successfully.",type:"success"}),void(0,_steps.activateStep)(2)}catch(error){_notification.default.exception(error)}},_jquery=_interopRequireDefault(_jquery),_notification=_interopRequireDefault(_notification);_exports.init=()=>{tinyConfig=window.dta_tiny_config,(0,_listeners.setEventListeners)(),setDefaultTinyMCE(),(0,_steps.activateStep)()}}));

//# sourceMappingURL=form.min.js.map